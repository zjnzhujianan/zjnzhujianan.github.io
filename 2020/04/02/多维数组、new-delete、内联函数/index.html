<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>多维数组、new/delete、内联函数 | Hexo</title><meta name="description" content="1.一维数组、二维数组、三维数组、指针数组一维数组 ： ptr ：一维数组首元素的地址  ptr+1 移动一个元素的字节&amp;ptr:  一维数组的地址       &amp;ptr+1 移动了整个数组的字节*(&amp;ptr) &#x3D;  ptr 对一维数组的地址取值即取一维数组首元素的地址 二维数组：ktr : 二维数组的首个一维数组的地址&amp;ktr ：二维数组的地址*ktr :"><meta name="keywords" content="数组,inline,new/delete"><meta name="author" content="Zhu Jianan"><meta name="copyright" content="Zhu Jianan"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://yoursite.com/2020/04/02/%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E3%80%81new-delete%E3%80%81%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta property="og:type" content="article"><meta property="og:title" content="多维数组、new/delete、内联函数"><meta property="og:url" content="http://yoursite.com/2020/04/02/%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E3%80%81new-delete%E3%80%81%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/"><meta property="og:site_name" content="Hexo"><meta property="og:description" content="1.一维数组、二维数组、三维数组、指针数组一维数组 ： ptr ：一维数组首元素的地址  ptr+1 移动一个元素的字节&amp;ptr:  一维数组的地址       &amp;ptr+1 移动了整个数组的字节*(&amp;ptr) &#x3D;  ptr 对一维数组的地址取值即取一维数组首元素的地址 二维数组：ktr : 二维数组的首个一维数组的地址&amp;ktr ：二维数组的地址*ktr :"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2020-04-02T10:45:06.000Z"><meta property="article:modified_time" content="2020-04-02T11:59:18.000Z"><meta name="twitter:card" content="summary"><script>var activateDarkMode = function () {
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#000')
  }
}
var activateLightMode = function () {
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null) {
    document.querySelector('meta[name="theme-color"]').setAttribute('content', '#fff')
  }
}

var getCookies = function (name) {
  const value = `; ${document.cookie}`
  const parts = value.split(`; ${name}=`)
  if (parts.length === 2) return parts.pop().split(';').shift()
}

var autoChangeMode = 'false'
var t = getCookies('theme')
if (autoChangeMode === '1') {
  var isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
  var isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
  var isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined) {
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport) {
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour <= 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
    }
    window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
      if (Cookies.get('theme') === undefined) {
        e.matches ? activateDarkMode() : activateLightMode()
      }
    })
  } else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else if (autoChangeMode === '2') {
  now = new Date()
  hour = now.getHours()
  isNight = hour <= 6 || hour >= 18
  if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode()
} else {
  if (t === 'dark') activateDarkMode()
  else if (t === 'light') activateLightMode()
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="prev" title="类string、迭代器、四种类型转换" href="http://yoursite.com/2020/04/03/%E7%B1%BBstring%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%E3%80%81%E5%9B%9B%E7%A7%8D%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"><link rel="next" title="C++命名空间、输入输出、关键字和引用" href="http://yoursite.com/2020/04/01/C-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E3%80%81%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E3%80%81%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E5%BC%95%E7%94%A8/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web&amp;display=swap"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: false,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false    
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isSidebar: true
  }</script><noscript><style>
#nav {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/touxiang.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">24</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">61</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fas fa-arrow-right on" id="toggle-sidebar"></i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-一维数组、二维数组、三维数组、指针数组"><span class="toc-number">1.</span> <span class="toc-text">1.一维数组、二维数组、三维数组、指针数组</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#一维数组-：-ptr-：一维数组首元素的地址-ptr-1-移动一个元素的字节"><span class="toc-number"></span> <span class="toc-text">一维数组 ： ptr ：一维数组首元素的地址  ptr+1 移动一个元素的字节</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amp-ptr-一维数组的地址-amp-ptr-1-移动了整个数组的字节"><span class="toc-number"></span> <span class="toc-text">&amp;ptr:  一维数组的地址       &amp;ptr+1 移动了整个数组的字节</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amp-ptr-ptr-对一维数组的地址取值即取一维数组首元素的地址"><span class="toc-number"></span> <span class="toc-text">*(&amp;ptr) &#x3D;  ptr 对一维数组的地址取值即取一维数组首元素的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#二维数组：ktr-二维数组的首个一维数组的地址"><span class="toc-number"></span> <span class="toc-text">二维数组：ktr : 二维数组的首个一维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amp-ktr-：二维数组的地址"><span class="toc-number"></span> <span class="toc-text">&amp;ktr ：二维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ktr-二维数组的首个一维数组的首元素地址"><span class="toc-number"></span> <span class="toc-text">*ktr :     二维数组的首个一维数组的首元素地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ktr-二维数组的首个一维数组的首元素的值"><span class="toc-number"></span> <span class="toc-text">**ktr:     二维数组的首个一维数组的首元素的值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amp-ktr-ktr-二维数组的地址取值等于二维数组的首个一维数组的地址"><span class="toc-number"></span> <span class="toc-text">*(&amp;ktr) &#x3D; ktr : 二维数组的地址取值等于二维数组的首个一维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#三维数组：-str-三维数组的首个二维数组的地址"><span class="toc-number"></span> <span class="toc-text">三维数组：  str: 三维数组的首个二维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#amp-str-三维数组的地址"><span class="toc-number"></span> <span class="toc-text">&amp;str: 三维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#str-三维数组的首个二维数组的首个一维数组的地址"><span class="toc-number"></span> <span class="toc-text">*str: 三维数组的首个二维数组的首个一维数组的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#str-三维数组的首个二维数组的首个一维数组的首元素的地址"><span class="toc-number"></span> <span class="toc-text">**str: 三维数组的首个二维数组的首个一维数组的首元素的地址</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#str-三维数组的首个二维数组的首个一维数组的首元素的值"><span class="toc-number"></span> <span class="toc-text">***str : 三维数组的首个二维数组的首个一维数组的首元素的值</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#指针数组实际上还是一维数组，只不过里面保存的是指针。"><span class="toc-number"></span> <span class="toc-text">指针数组实际上还是一维数组，只不过里面保存的是指针。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#wtr-首个元素的地址，地址存放的是指针。"><span class="toc-number"></span> <span class="toc-text">wtr: 首个元素的地址，地址存放的是指针。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。"><span class="toc-number"></span> <span class="toc-text">总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-new-delete"><span class="toc-number">1.</span> <span class="toc-text">2. new&#x2F;delete</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#malloc-free-在C-升级成-new-delete-内部封装的还是malloc-free函数"><span class="toc-number"></span> <span class="toc-text">malloc&#x2F;free 在C++升级成 new&#x2F;delete : 内部封装的还是malloc&#x2F;free函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#例-：-char-p-new-char-char-ptr-new-char-100"><span class="toc-number"></span> <span class="toc-text">例 ： char *p &#x3D; new char;  char *ptr &#x3D; new char[100];</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#delete-p-delete-p"><span class="toc-number"></span> <span class="toc-text">delete p;                          delete   []p;</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#new-分配二维数组"><span class="toc-number"></span> <span class="toc-text">new 分配二维数组</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1、定长规则的二维数组实现：例：int-p-5-new-int-5"><span class="toc-number"></span> <span class="toc-text">1、定长规则的二维数组实现：例：int (*p)[5] &#x3D; new int [ ][5];</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2、-不定长不规则二维数组实现：例：int-arr-arr-new-int-2-arr-0-new-int-10-arr-1-new-int-20"><span class="toc-number"></span> <span class="toc-text">2、 不定长不规则二维数组实现：例：int **arr; arr &#x3D; new int *[2];  arr[0] &#x3D; new int [10]; arr[1] &#x3D; new int [20];</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#new-delete和malloc-free的区别："><span class="toc-number"></span> <span class="toc-text">new&#x2F;delete和malloc&#x2F;free的区别：</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#new-delete-：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；"><span class="toc-number"></span> <span class="toc-text">new&#x2F;delete ：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#malloc-free-：-函数；-按照字节为单位分配；只能手动初始化；失败返回NULL"><span class="toc-number"></span> <span class="toc-text">malloc&#x2F;free ：  函数； 按照字节为单位分配；只能手动初始化；失败返回NULL</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#注意事项：new-malloc-频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！-来解决。"><span class="toc-number"></span> <span class="toc-text">注意事项：new&#x2F;malloc 频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！ 来解决。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#NULL-C-升级成-nullptr"><span class="toc-number"></span> <span class="toc-text">NULL C++升级成 nullptr</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-内联函数"><span class="toc-number">1.</span> <span class="toc-text">3.内联函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#关键字：inline-修饰的函数是内联函数"><span class="toc-number"></span> <span class="toc-text">关键字：inline 修饰的函数是内联函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1、以时间换空间：宏函数"><span class="toc-number"></span> <span class="toc-text">1、以时间换空间：宏函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。"><span class="toc-number"></span> <span class="toc-text">宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2、以空间换时间：-内联函数"><span class="toc-number"></span> <span class="toc-text">2、以空间换时间： 内联函数</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。"><span class="toc-number"></span> <span class="toc-text">正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#inline-编译决定是否内联处理。"><span class="toc-number"></span> <span class="toc-text">inline : 编译决定是否内联处理。</span></a></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><nav id="nav"><span class="pull-left" id="blog_name"><a class="blog_title" id="site-name" href="/">Hexo</a></span><span class="pull-right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fas fa-list"></i><span> 清单</span><i class="fas fa-chevron-down menus-expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><div id="post-title"><div class="posttitle">多维数组、new/delete、内联函数</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-02 18:45:06"><i class="far fa-calendar-alt fa-fw"></i> 发表于 2020-04-02</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-04-02 19:59:18"><i class="fas fa-history fa-fw"></i> 更新于 2020-04-02</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta__icon"></i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></header><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h2 id="1-一维数组、二维数组、三维数组、指针数组"><a href="#1-一维数组、二维数组、三维数组、指针数组" class="headerlink" title="1.一维数组、二维数组、三维数组、指针数组"></a>1.一维数组、二维数组、三维数组、指针数组</h2><h1 id="一维数组-：-ptr-：一维数组首元素的地址-ptr-1-移动一个元素的字节"><a href="#一维数组-：-ptr-：一维数组首元素的地址-ptr-1-移动一个元素的字节" class="headerlink" title="一维数组 ： ptr ：一维数组首元素的地址  ptr+1 移动一个元素的字节"></a>一维数组 ： ptr ：一维数组首元素的地址  ptr+1 移动一个元素的字节</h1><h1 id="amp-ptr-一维数组的地址-amp-ptr-1-移动了整个数组的字节"><a href="#amp-ptr-一维数组的地址-amp-ptr-1-移动了整个数组的字节" class="headerlink" title="&amp;ptr:  一维数组的地址       &amp;ptr+1 移动了整个数组的字节"></a>&amp;ptr:  一维数组的地址       &amp;ptr+1 移动了整个数组的字节</h1><h1 id="amp-ptr-ptr-对一维数组的地址取值即取一维数组首元素的地址"><a href="#amp-ptr-ptr-对一维数组的地址取值即取一维数组首元素的地址" class="headerlink" title="*(&amp;ptr) =  ptr 对一维数组的地址取值即取一维数组首元素的地址"></a>*(&amp;ptr) =  ptr 对一维数组的地址取值即取一维数组首元素的地址</h1><a id="more"></a>
<h1 id="二维数组：ktr-二维数组的首个一维数组的地址"><a href="#二维数组：ktr-二维数组的首个一维数组的地址" class="headerlink" title="二维数组：ktr : 二维数组的首个一维数组的地址"></a>二维数组：ktr : 二维数组的首个一维数组的地址</h1><h1 id="amp-ktr-：二维数组的地址"><a href="#amp-ktr-：二维数组的地址" class="headerlink" title="&amp;ktr ：二维数组的地址"></a>&amp;ktr ：二维数组的地址</h1><h1 id="ktr-二维数组的首个一维数组的首元素地址"><a href="#ktr-二维数组的首个一维数组的首元素地址" class="headerlink" title="*ktr :     二维数组的首个一维数组的首元素地址"></a>*ktr :     二维数组的首个一维数组的首元素地址</h1><h1 id="ktr-二维数组的首个一维数组的首元素的值"><a href="#ktr-二维数组的首个一维数组的首元素的值" class="headerlink" title="**ktr:     二维数组的首个一维数组的首元素的值"></a>**ktr:     二维数组的首个一维数组的首元素的值</h1><h1 id="amp-ktr-ktr-二维数组的地址取值等于二维数组的首个一维数组的地址"><a href="#amp-ktr-ktr-二维数组的地址取值等于二维数组的首个一维数组的地址" class="headerlink" title="*(&amp;ktr) = ktr : 二维数组的地址取值等于二维数组的首个一维数组的地址"></a>*(&amp;ktr) = ktr : 二维数组的地址取值等于二维数组的首个一维数组的地址</h1><h1 id="三维数组：-str-三维数组的首个二维数组的地址"><a href="#三维数组：-str-三维数组的首个二维数组的地址" class="headerlink" title="三维数组：  str: 三维数组的首个二维数组的地址"></a>三维数组：  str: 三维数组的首个二维数组的地址</h1><h1 id="amp-str-三维数组的地址"><a href="#amp-str-三维数组的地址" class="headerlink" title="&amp;str: 三维数组的地址"></a>&amp;str: 三维数组的地址</h1><h1 id="str-三维数组的首个二维数组的首个一维数组的地址"><a href="#str-三维数组的首个二维数组的首个一维数组的地址" class="headerlink" title="*str: 三维数组的首个二维数组的首个一维数组的地址"></a>*str: 三维数组的首个二维数组的首个一维数组的地址</h1><h1 id="str-三维数组的首个二维数组的首个一维数组的首元素的地址"><a href="#str-三维数组的首个二维数组的首个一维数组的首元素的地址" class="headerlink" title="**str: 三维数组的首个二维数组的首个一维数组的首元素的地址"></a>**str: 三维数组的首个二维数组的首个一维数组的首元素的地址</h1><h1 id="str-三维数组的首个二维数组的首个一维数组的首元素的值"><a href="#str-三维数组的首个二维数组的首个一维数组的首元素的值" class="headerlink" title="***str : 三维数组的首个二维数组的首个一维数组的首元素的值"></a>***str : 三维数组的首个二维数组的首个一维数组的首元素的值</h1><h1 id="指针数组实际上还是一维数组，只不过里面保存的是指针。"><a href="#指针数组实际上还是一维数组，只不过里面保存的是指针。" class="headerlink" title="指针数组实际上还是一维数组，只不过里面保存的是指针。"></a>指针数组实际上还是一维数组，只不过里面保存的是指针。</h1><h1 id="wtr-首个元素的地址，地址存放的是指针。"><a href="#wtr-首个元素的地址，地址存放的是指针。" class="headerlink" title="wtr: 首个元素的地址，地址存放的是指针。"></a>wtr: 首个元素的地址，地址存放的是指针。</h1><h1 id="总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。"><a href="#总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。" class="headerlink" title="总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。"></a>总体而言，传参时，数组会退化成指针形式，如果是多维数组，则是数组指针；指针数组是二级指针。</h1><p>#include &lt;stdio.h&gt;</p>
<p>//char ptr[100] char str[2][100]</p>
<p>void print1( char *ptr)<br>{<br>    printf(“%s\n”,ptr);<br>}</p>
<p>void print2(char (<em>ktr)[100])<br>{<br>    for(int i = 0; i &lt; 3; i++)<br>    {<br>        printf(“%s\n”,</em>(ktr + i));<br>    }<br>}</p>
<p>void print3(char (<em>str)[2][100])<br>{<br>    for(int i = 0; i &lt; 2; i++)<br>    {<br>        for(int j =0 ; j &lt; 2; j++)<br>        {<br>            printf(“%s\n”,</em>(*(str + i)+j));<br>        }<br>    }<br>}</p>
<p>void print4(char **wtr)<br>{<br>    for(int i = 0; i &lt; 3; i++)<br>    {<br>        printf(“%s\n”, *(wtr + i));<br>    }<br>}</p>
<p>int main()<br>{<br>    char ptr[100] = “hello world”;</p>
<pre><code>char ktr[3][100] = {&quot;hello1&quot;, &quot;hello2&quot;, &quot;hello3&quot;};

char str[2][2][100] = {{"hello4", "hello5"}, {"hello6", "hello7"}};

char *wtr[3] = {&quot;hello8&quot;, &quot;hello9&quot;, &quot;hello10&quot;};

print1(ptr);
print2(ktr);
print3(str);
print4(wtr);

return 0;</code></pre><p>}</p>
<h2 id="2-new-delete"><a href="#2-new-delete" class="headerlink" title="2. new/delete"></a>2. new/delete</h2><h1 id="malloc-free-在C-升级成-new-delete-内部封装的还是malloc-free函数"><a href="#malloc-free-在C-升级成-new-delete-内部封装的还是malloc-free函数" class="headerlink" title="malloc/free 在C++升级成 new/delete : 内部封装的还是malloc/free函数"></a>malloc/free 在C++升级成 new/delete : 内部封装的还是malloc/free函数</h1><h1 id="例-：-char-p-new-char-char-ptr-new-char-100"><a href="#例-：-char-p-new-char-char-ptr-new-char-100" class="headerlink" title="例 ： char *p = new char;  char *ptr = new char[100];"></a>例 ： char *p = new char;  char *ptr = new char[100];</h1><h1 id="delete-p-delete-p"><a href="#delete-p-delete-p" class="headerlink" title="delete p;                          delete   []p;"></a>delete p;                          delete   []p;</h1><h1 id="new-分配二维数组"><a href="#new-分配二维数组" class="headerlink" title="new 分配二维数组"></a>new 分配二维数组</h1><h1 id="1、定长规则的二维数组实现：例：int-p-5-new-int-5"><a href="#1、定长规则的二维数组实现：例：int-p-5-new-int-5" class="headerlink" title="1、定长规则的二维数组实现：例：int (*p)[5] = new int [ ][5];"></a>1、定长规则的二维数组实现：例：int (*p)[5] = new int [ ][5];</h1><h1 id="2、-不定长不规则二维数组实现：例：int-arr-arr-new-int-2-arr-0-new-int-10-arr-1-new-int-20"><a href="#2、-不定长不规则二维数组实现：例：int-arr-arr-new-int-2-arr-0-new-int-10-arr-1-new-int-20" class="headerlink" title="2、 不定长不规则二维数组实现：例：int **arr; arr = new int *[2];  arr[0] = new int [10]; arr[1] = new int [20];"></a>2、 不定长不规则二维数组实现：例：int **arr; arr = new int *[2];  arr[0] = new int [10]; arr[1] = new int [20];</h1><h1 id="new-delete和malloc-free的区别："><a href="#new-delete和malloc-free的区别：" class="headerlink" title="new/delete和malloc/free的区别："></a>new/delete和malloc/free的区别：</h1><h1 id="new-delete-：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；"><a href="#new-delete-：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；" class="headerlink" title="new/delete ：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；"></a>new/delete ：（暂时）运算符；按照类型的个数为单位分配；可以初始化（最好手动初始化，默认初始化为0）；如果分配失败会产生异常；</h1><h1 id="malloc-free-：-函数；-按照字节为单位分配；只能手动初始化；失败返回NULL"><a href="#malloc-free-：-函数；-按照字节为单位分配；只能手动初始化；失败返回NULL" class="headerlink" title="malloc/free ：  函数； 按照字节为单位分配；只能手动初始化；失败返回NULL"></a>malloc/free ：  函数； 按照字节为单位分配；只能手动初始化；失败返回NULL</h1><h1 id="注意事项：new-malloc-频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！-来解决。"><a href="#注意事项：new-malloc-频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！-来解决。" class="headerlink" title="注意事项：new/malloc 频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！ 来解决。"></a>注意事项：new/malloc 频繁分配小内存会导致内存产生碎片，同时会增加开销，采用池化技术：内存池！ 来解决。</h1><h1 id="NULL-C-升级成-nullptr"><a href="#NULL-C-升级成-nullptr" class="headerlink" title="NULL C++升级成 nullptr"></a>NULL C++升级成 nullptr</h1><h2 id="3-内联函数"><a href="#3-内联函数" class="headerlink" title="3.内联函数"></a>3.内联函数</h2><h1 id="关键字：inline-修饰的函数是内联函数"><a href="#关键字：inline-修饰的函数是内联函数" class="headerlink" title="关键字：inline 修饰的函数是内联函数"></a>关键字：inline 修饰的函数是内联函数</h1><h1 id="1、以时间换空间：宏函数"><a href="#1、以时间换空间：宏函数" class="headerlink" title="1、以时间换空间：宏函数"></a>1、以时间换空间：宏函数</h1><h1 id="宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。"><a href="#宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。" class="headerlink" title="宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。"></a>宏函数在预处理阶段处理，处理过程是傻瓜式替代，没有分配内存空间的过程，在编译时耗时会较长，典型的以时间换空间，但不做语法检查不安全；而自定义函数编译时会检查语法，然后运行时函数进行栈进栈出；处理过程是通过函数名找到函数入口地址，给形参分配内存空间，传值，执行函数体语句，函数返回，释放内存。</h1><h1 id="2、以空间换时间：-内联函数"><a href="#2、以空间换时间：-内联函数" class="headerlink" title="2、以空间换时间： 内联函数"></a>2、以空间换时间： 内联函数</h1><h1 id="正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。"><a href="#正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。" class="headerlink" title="正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。"></a>正常函数有调用和返回的时间开销，而内联函数编译时将函数体的语句直接内嵌到函数被调用的地方，从而节省函数的调用和返回时间，不过只适用于简单的频繁使用的函数，且内联函数要先定义声明在被调用前。</h1><h1 id="inline-编译决定是否内联处理。"><a href="#inline-编译决定是否内联处理。" class="headerlink" title="inline : 编译决定是否内联处理。"></a>inline : 编译决定是否内联处理。</h1><pre><code>* 函数的默认参数:如果一个参数为默认参数，那么它右边的所有参数必须为默认参数
* 函数的参数占位符: 预留函数接口
* 函数重载: 解决函数名命名的可读性问题！！
* 函数重载的条件: 函数形参的个数不同；函数形参个数相同类型不同；函数形参个数相同，形参类型不同顺序不同；
* 函数形参的个数、类型、顺序不同！！！！
* 注意事项：函数返回值（返回类型不能更改）不能作为重载条件; 函数默认参数会影响重载条件;</code></pre></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Zhu Jianan</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/04/02/%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E3%80%81new-delete%E3%80%81%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/">http://yoursite.com/2020/04/02/%E5%A4%9A%E7%BB%B4%E6%95%B0%E7%BB%84%E3%80%81new-delete%E3%80%81%E5%86%85%E8%81%94%E5%87%BD%E6%95%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://yoursite.com" target="_blank">Hexo</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E7%BB%84/">数组</a><a class="post-meta__tags" href="/tags/inline/">inline</a><a class="post-meta__tags" href="/tags/new-delete/">new/delete</a></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/04/03/%E7%B1%BBstring%E3%80%81%E8%BF%AD%E4%BB%A3%E5%99%A8%E3%80%81%E5%9B%9B%E7%A7%8D%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2/"><img class="prev-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">类string、迭代器、四种类型转换</div></div></a></div><div class="next-post pull-right"><a href="/2020/04/01/C-%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4%E3%80%81%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E3%80%81%E5%85%B3%E9%94%AE%E5%AD%97%E5%92%8C%E5%BC%95%E7%94%A8/"><img class="next-cover" data-src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">C++命名空间、输入输出、关键字和引用</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By Zhu Jianan</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><button id="readmode" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="font_plus" title="放大字体"><i class="fas fa-plus"></i></button><button id="font_minus" title="缩小字体"><i class="fas fa-minus"></i></button><button class="translate_chn_to_cht" id="translateLink" title="简繁转换">繁</button><button id="darkmode" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button></div><div id="rightside-config-show"><button id="rightside_config" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page/instantpage.min.js" type="module" defer></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js" async></script></body></html>